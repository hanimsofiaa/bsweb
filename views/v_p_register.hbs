<!DOCTYPE html>
<html lang="en">

<script>

</script>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" />

    <!-- font awesome  -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous" />

    <link rel="stylesheet" href="/style.css">
    <title>Patient Registration</title>
</head>

<body>
    <nav>
        <h4>Bariact</h4>
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/login">Login</a></li>
            <li><a href="/register">Back to Register</a></li>
        </ul>
    </nav>

    <div class="container mt-4">
       <div class="card">
		   <div class="card-header">Register Form</div>
			<div class="card-body">
				<form action="/auth/registerpatient" method="POST">
				
					<div class="form-group" id="ic" name= "ic" style="padding: 5px; display:none;">
						<label for="ic">Registered IC</label>
						<input type="text" class="form-control" id="ic" name= "ic" value="{{#if ic}}{{ic}}{{/if}}" onload="inputIC({{#if ic}}{{ic}}{{/if}});">
					</div>
					
					<div class="form-group" style="padding: 5px;">
						<label for="fullname">Fullname</label>
						<input type="text" class="form-control" id="fullname" name= "fullname" placeholder="Enter Fullname">
					</div>
					
					<div class="form-group" id="age" name= "age" style="padding: 5px;">
					
						<input type="hidden" class="form-control" id="age" name= "age" value="0">
					</div>
										
					<div class="form-group" style="padding: 5px;">
						<label for="home_address">Home address</label>
						<input type="text" class="form-control" id="home_address" name="home_address" placeholder="Enter Home Address">
					</div>
				
					<div class="form-group" style="padding: 5px;">
						<label for="phone_number">Phone Number</label>
						<input type="tel" class="form-control" id="phone_number" name="phone_number" placeholder="Enter Phone Number">
					</div>
					
					<div class="form-group" id="gender" name= "gender" style="padding: 5px;">
			
						<input type="hidden" class="form-control" id="gender" name= "gender" value="unknown">
					</div>
					
					
					<div class="form-group" style="padding: 5px; width:fit-content">
						<label for="marital_status">Select Marital Status</label>
						<select class="form-select"  id="marital_status" name="marital_status" aria-label="marital_status">
							<option value="single" selected>Single</option>
							<option value="married">Married</option>
							<option value="divorce">Divorce</option>
							<option value="separated">Separated</option>
							<option value="widowed">Widowed</option>
						</select>
						
					</div>
					
					<div class="form-group" style="padding: 5px; width:fit-content">
						<label for="activity_level">Select Physical Activity Level</label>
						<select class="form-select"  id="activity_level" name="activity_level" aria-label="activity_level">
							<option value="sedentary" selected>Sedentary</option>
							<option value="lightly">Lightly Active</option>
							<option value="moderately">Moderately Active</option>
							<option value="highly">Highly Active</option>
							<option value="extremely">Extremely Active</option>
						</select>
					</div>
					
					<div class="form-group" style="padding: 5px;">
						<label for="height">Height</label>
						<input type="number" class="form-control" id="height" name="height" placeholder="Enter Height(cm)">
					</div>
					
					<div class="form-group" style="padding: 5px; width:fit-content">
						<label for="surgery_status">Select Surgery Status</label>
						<select class="form-select"  id="surgery_status" name="surgery_status" aria-label="surgery_status" onchange="inputSurgery(this.value);">
							<option value="post" selected>Post-Operation</option>
							<option value="pre">Pre-Operation</option>
						</select>
					</div>
					
					<div class="form-group" style="padding: 5px;">
						<label for="curr_weight">Current Weight</label>
						<input type="number" class="form-control" id="curr_weight" name="curr_weight" placeholder="Enter Weight(kg)">
					</div>
					
					<div class="form-group" id="before_surg_weight" name="before_surg_weight" style="padding: 5px;">
						<label for="before_surg_weight" id="before_surg_weight" name="before_surg_weight">Weight Before Operation</label>
						<input type="number" class="form-control" id="before_surg_weight" name="before_surg_weight" placeholder="Enter Weight(kg)" value="">
					</div>
					
					<div class="form-group" style="padding: 5px; width:fit-content">
						<label for="surgery_date">Date of Operation</label>
						<div class="input-group date" id="surgery_date" name="surgery_date" data-provide="datepicker">
							<input type="date" class="form-control" id="surgery_date" name="surgery_date">
							<div class="input-group-addon">
								<span class="glyphicon glyphicon-th"></span>
							</div>
						</div>
					</div>
					
					<div class="form-group" style="padding: 5px;">
						<div class="btn-group">
							<button type="submit" class="btn btn-primary" style="padding: 5px;">Register</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	
    </div>

</body>

<script>
/*
window.addEventListener('load', function() {
    console.log('All assets are loaded');
	
	var myIC = document.getElementById("ic");
	var myGender = document.getElementById("gender");
	var myAge = document.getElementById("age");

	console.log("ic value: "+ myIC.value);
	console.log(typeof myIC.value);
});
	
	
	//get gender
	var ic_val = Number(myIC);
	console.log("ic value"+ ic_val);
	console.log(typeof ic_val);
	
	if ((ic_val%2) == 0) {
		myGender.innerHTML.value = "Female"; //even
		console.log("My Gender " + myGender.innerHTML.value);
		
	} else {
		myGender.innerHTML.value = "Male"; //odd
		console.log("My Gender " + myGender.innerHTML.value);
	}
	
	//get age
	let string_ic = String.toString(myIC);
	var birthyear = null;
	if(string_ic.charAt(0) == "0" || string_ic.charAt(0) == "1" || string_ic.charAt(0) == "2"  ){
		const char0 = 2;
		const char1 = 0;
		
		birthyear = '' + char0 + char1 + string_ic.charAt(0) + string_ic.charAt(1);
		console.log("My birthyear 1" + birthyear);
		console.log(typeof birthyear);
	}else{
		const char0 = 1;
		const char1 = 9;
		
		birthyear = '' + char0 + char1 + string_ic.charAt(0) + string_ic.charAt(1);
		console.log("My birthyear 2" + birthyear);
		console.log(typeof birthyear);
	}
	
	var curr_year = new Date().getFullYear();
	console.log("Current Year" + curr_year);
	
	console.log(birthyear);
	var final_age = curr_year - Number(birthyear);
	console.log(typeof birthyear);
	console.log("Final Age" + final_age);
	myAge.innerHTML.value = final_age;
})*/

//get age and gender based on IC
function inputIC(ic){
	
	console.log(ic+"my ic");
	console.log(typeof ic);
	var myGender = document.getElementById("gender");
	var myAge = document.getElementById("age");
	
	console.log(ic+" "+myGender.value+" "+myAge.value);
	
}


//display surgery weight before operation
function inputSurgery(status){
	if(status == "pre"){
		document.getElementById("before_surg_weight").style.display = "none";
	}else if(status == "post"){
		document.getElementById("before_surg_weight").style.display = "block";
	}else{
		console.log("Error Surgery Status" + status)
	}
}


	
</script>

</html>
